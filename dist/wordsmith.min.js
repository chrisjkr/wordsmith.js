/*
wordsmith.js 0.1.1
Copyright 2016 Krzysztof Kraszewski
Free to use under MIT licence.
*/
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,i,t){return i&&e(n.prototype,i),t&&e(n,t),n}}(),Wordsmith=function(){function e(n){_classCallCheck(this,e),this.tag=n.tag?n.tag:"body",this.typingSpeed=n.typingSpeed?n.typingSpeed:1,this.elementCounter=-1,this.isTyping=!1,this.endAfterTyping=!1,this.tag.classList.add("wordsmith")}return _createClass(e,[{key:"typingDelay",value:function(){return(Math.floor(111*Math.random())+10)/this.typingSpeed}},{key:"type",value:function(e){function n(e,r){function s(e,r){i.elementCounter++;var s="<"+e.slice(0,e.indexOf(">")+1).join("");e=e.slice(e.indexOf(">")+1);var o=s.slice(1,s.indexOf(" "));if(!(e.join("").indexOf("</"+o+">")>-1))return s.indexOf("<pausefor")>-1?(i.elementCounter--,"!"===s[9]?setTimeout(n.bind(null,e,r),Number(s.slice(9,-1))):setTimeout(n.bind(null,e,r),Number(s.slice(10,-1)/i.typingSpeed))):(t.innerHTML+=s,n(e,r));t.innerHTML+=s+"</"+o+">";var a=e.join("").slice(0,e.join("").indexOf("</"+o+">")).split("");console.log(),l(t.querySelectorAll("*")[i.elementCounter],a,function(){return e=e.slice(e.join("").indexOf("</"+o+">")+3+o.length),n(e,r)})}function l(e,n,t){return n.length?(e.innerHTML+=n.shift(),setTimeout(l.bind(null,e,n,t),i.typingDelay())):t()}if(i.isTyping=!0,!e.length)return i.isTyping=!1,i.endAfterTyping&&i.end(),r(!0);var o=e.shift();return"<"===o?s(e,r):(t.innerHTML+=o,void setTimeout(n.bind(null,e,r),i.typingDelay()))}var i=this,t=i.tag;e=e.replace(/\r?\n|\r/g,""),n(e.split(""),function(e){})}},{key:"end",value:function(){var e=this;e.endAfterTyping||!e.isTyping?e.tag.classList.remove("wordsmith"):e.isTyping&&(e.endAfterTyping=!0)}}]),e}();window.Wordsmith=Wordsmith;