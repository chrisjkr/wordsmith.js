/*
wordsmith.js 0.1.0
Copyright 2016 Krzysztof Kraszewski
Free to use under MIT licence.
*/
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),Wordsmith=function(){function e(n){_classCallCheck(this,e),this.tag=n.tag?n.tag:"body",this.typingSpeed=n.typingSpeed?n.typingSpeed:1,this.elementCounter=-1}return _createClass(e,[{key:"typingDelay",value:function(){return(Math.floor(111*Math.random())+10)/this.typingSpeed}},{key:"type",value:function(e){function n(e,r){function o(e,r){t.elementCounter++;var o="<"+e.slice(0,e.indexOf(">")+1).join("");e=e.slice(e.indexOf(">")+1);var u=o.slice(1,o.indexOf(" "));if(!(e.join("").indexOf("</"+u+">")>-1))return o.indexOf("<pausefor")>-1?(t.elementCounter--,setTimeout(n.bind(null,e,r),Number(o.slice(9,-1)))):(i.innerHTML+=o,n(e,r));i.innerHTML+=o+"</"+u+">";var a=e.join("").slice(0,e.join("").indexOf("</"+u+">")).split("");console.log(),l(i.querySelectorAll("*")[t.elementCounter],a,function(){return e=e.slice(e.join("").indexOf("</"+u+">")+3+u.length),n(e,r)})}function l(e,n,i){if(!n.length)return i();var r=n.shift();return e.innerHTML+=r,setTimeout(l.bind(null,e,n,i),t.typingDelay())}if(!e.length)return r(!0);var u=e.shift();return"<"===u?o(e,r):(i.innerHTML+=u,void setTimeout(n.bind(null,e,r),t.typingDelay()))}var t=this,i=t.tag;e=e.replace(/\r?\n|\r/g,""),n(e.split(""),function(e){})}}]),e}();exports.default=Wordsmith,window.Wordsmith=Wordsmith;